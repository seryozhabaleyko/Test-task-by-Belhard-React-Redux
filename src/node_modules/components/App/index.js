import React, { Suspense, lazy } from 'react';
import { BrowserRouter as Router, Route, Switch, Link } from 'react-router-dom';

import store from 'redux/store';
import PrivateRoute from 'routs/PrivateRoute';

const Home = lazy(() => import('pages/Home'));
const Login = lazy(() => import('pages/Login'));
const News = lazy(() => import('pages/News'));
const Profile = lazy(() => import('pages/Profile'));

function App() {

    return (
        <Router>
            <div>
                <ul>
                    <li><Link to="/">home</Link></li>
                    <li><Link to="/login">login</Link></li>
                    <li><Link to="/news">news</Link></li>
                    <li><Link to="/profile">profile</Link></li>
                </ul>
                <Suspense fallback={<div className="preloader">Загрузка...</div>}>
                    <Switch>
                        <Route path="/" component={Home} exact />
                        <Route path="/login" component={Login} />
                        <Route path="/news" component={News} />
                        <PrivateRoute store={store} path='/profile' component={Profile} />
                    </Switch>
                </Suspense>
            </div>
        </Router>
    )
}

export default App;